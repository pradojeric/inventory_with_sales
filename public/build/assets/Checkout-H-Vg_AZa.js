import{W as b,r as n,j as e}from"./app-YX2pnVqe.js";import{M as N}from"./Modal-BWKKeNun.js";import y from"./OrderList-djr_PrgR.js";import{L as t,T as l,S as C,B as x}from"./Toast-xRRfD0nu.js";import"./transition-2eVQxMA2.js";import"./Util-py14zHy8.js";import"./index-Nb-1AsgF.js";function R({show:m,onClose:i=()=>{},orders:d,order_no:v,totalAmount:o,totalQuantity:j}){const{data:a,setData:c,post:_,processing:p,errors:r,reset:k,clearErrors:q}=b({order_no:v,customer_name:"",customer_address:"",payment_method:"",cash_received:"",sale_date:new Date().toISOString().split("T")[0],orders:[],change_amount:0,reference_no:""}),[g,u]=n.useState(0);n.useEffect(()=>{c("orders",d)},[d]),n.useEffect(()=>{u(-o)},[m]);const f=s=>{s.preventDefault(),_(route("sales.store"),{onSuccess:()=>[i()]})};return e.jsx(e.Fragment,{children:e.jsx(N,{show:m,onClose:i,maxWidth:"3xl",children:e.jsx("form",{children:e.jsxs("div",{className:"p-6 text-gray-900 h-full",children:[e.jsx("h3",{className:"font-semibold uppercase tracking-tighter",children:"Checkout"}),e.jsx("hr",{}),e.jsxs("div",{className:"h-auto my-2 grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(y,{totalPrice:o,products:d,totalQuantity:j})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"order_no",value:"Order No"})}),e.jsx(l,{id:"order_no",value:a.order_no,disabled:!0,required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"sale_date",value:"Sale Date"})}),e.jsx(l,{type:"date",id:"sale_date",value:a.sale_date,onChange:s=>{c("sale_date",s.target.value)},color:r.sale_date&&"failure",helperText:r.sale_date,required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"customer_name",value:"Customer Name"})}),e.jsx(l,{id:"customer_name",required:!0,value:a.customer_name,name:"customer_name",autoComplete:"customer_name",onChange:s=>{c("customer_name",s.target.value)}})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"c_address",value:"Customer Address"})}),e.jsx(l,{id:"c_address",required:!0,value:a.customer_address,onChange:s=>{c("customer_address",s.target.value)}})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"payment_method",value:"Payment Mode"})}),e.jsxs(C,{id:"payment_method",required:!0,value:a.payment_method,onChange:s=>{c("payment_method",s.target.value)},color:r.payment_method&&"failure",helperText:r.payment_method,children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"gcash",children:"Gcash"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"account_receivable",children:"Account Receivable"})]})]}),(a.payment_method=="gcash"||a.payment_method=="cheque")&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"c_address",value:"Reference No / Cheque No"})}),e.jsx(l,{id:"reference_no",required:!0,value:a.reference_no,onChange:s=>{c("reference_no",s.target.value)},color:r.reference_no&&"failure",helperText:r.reference_no})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"cash_received",value:"Payment Received"})}),e.jsx(l,{id:"cash_received",type:"number",required:!0,min:0,value:a.cash_received,onChange:s=>{const h=s.target.value-o;c({...a,cash_received:s.target.value,change_amount:h}),u(h)},color:r.cash_received&&"failure",helperText:r.cash_received})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"cc",value:"Change"})}),e.jsx(l,{id:"cc",type:"number",required:!0,value:g,disabled:!0})]})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[e.jsx(x,{type:"button",color:"light",onClick:i,children:"Close"}),e.jsx(x,{onClick:f,disabled:d.length<1||p,children:"Save"})]})]})})})})}export{R as default};

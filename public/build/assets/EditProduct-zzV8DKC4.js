import{W as P,r as t,j as e}from"./app-42ltUd7i.js";import V from"./AddCategory-2Vc-5qUy.js";import{M as B}from"./Modal-DdNgA3zw.js";import{L as n,S as _,B as d,T as x,b as D}from"./Toast-XrROLtNV.js";import{H as p}from"./index-770LS76q.js";import{B as A}from"./index-JrNM0cAb.js";import H from"./EditCategory-RxgHw69Y.js";import"./transition-xdtGHmtU.js";function J({product:i=null,categories:c,show:b=!1,onClose:j=()=>{}}){const{data:s,setData:r,post:C,processing:N,errors:l,reset:L,clearErrors:u}=P({name:i==null?void 0:i.name,category_id:i==null?void 0:i.category_id,description:i==null?void 0:i.description,variant_id:i==null?void 0:i.variant_id,quantity:i==null?void 0:i.quantity,price:i==null?void 0:i.price,retail_price:i==null?void 0:i.retail_price,wholesale_price:i==null?void 0:i.wholesale_price}),[w,q]=t.useState(!1),[k,S]=t.useState(!1),[h,f]=t.useState(""),[E,m]=t.useState([]),y=()=>{q(a=>a=!a)},g=()=>{S(a=>a=!a)};t.useEffect(()=>{u()},[s]),t.useEffect(()=>{r({name:i==null?void 0:i.name,category_id:i==null?void 0:i.category_id,description:i==null?void 0:i.description,variant_id:i==null?void 0:i.variant_id,quantity:i==null?void 0:i.quantity,price:i==null?void 0:i.price,retail_price:i==null?void 0:i.retail_price,wholesale_price:i==null?void 0:i.wholesale_price}),f(i.category);const a=c.find(o=>o.id==i.category_id);m(a?a.variants:[])},[c,i]);const F=a=>{a.preventDefault(),C(route("products.update",{product:i==null?void 0:i.id}),{only:["products"],onSuccess:()=>[j()]})},T=a=>{r("category_id",a),f(c.find(v=>v.id==a)),console.log(h);const o=c.find(v=>v.id==a);m(o?o.variants:[])};return e.jsx(e.Fragment,{children:e.jsxs(B,{show:b,onClose:j,closeable:!1,children:[e.jsx(V,{show:w,onClose:y}),h&&e.jsx(H,{category:h,show:k,onClose:g}),e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 uppercase",children:"Products"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(n,{htmlFor:"category",value:"Category"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(_,{className:"w-full",id:"category",required:!0,value:s.category_id,onChange:a=>T(a.target.value),color:l.category_id&&"failure",children:[e.jsx("option",{value:"",children:"Select One"}),c.map(a=>e.jsx("option",{value:a.id,children:a.name},"cat"+a.id))]}),e.jsx(d,{type:"button",onClick:y,children:e.jsx(p,{})}),e.jsx(d,{disabled:!h,type:"button",color:"green",onClick:g,children:e.jsx(A,{})})]}),l.category_id&&e.jsx("p",{className:"mt-2 text-sm text-red-700",children:l.category_id})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"block w-full",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(n,{htmlFor:"product",value:"Product"})}),e.jsx(x,{id:"product",value:s.name,className:"w-full",required:!0,onChange:a=>r("name",a.target.value),color:l.name&&"failure",helperText:l.name})]}),e.jsxs("div",{className:"shrink-0",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(n,{htmlFor:"variant_id",value:"Variant"})}),e.jsxs(_,{className:"w-full",id:"variant_id",required:!0,value:s.variant_id,onChange:a=>r("variant_id",a.target.value),color:l.category_id&&"failure",children:[e.jsx("option",{value:"",children:"N/A"}),E.map(a=>e.jsx("option",{value:a.id,children:a.name},"cat"+a.id))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(n,{htmlFor:"quantity",value:"Quantity"})}),e.jsx(x,{type:"number",id:"quantity",min:"0",defaultValue:s.quantity,required:!0,onChange:a=>r("quantity",a.target.value),color:l.quantity&&"failure",helperText:l.quantity})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(n,{htmlFor:"price",value:"Price"})}),e.jsx(x,{type:"number",id:"price",min:"0",defaultValue:s.price,required:!0,onChange:a=>r("price",a.target.value),color:l.price&&"failure",helperText:l.price})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(n,{htmlFor:"retail_price",value:"Retail Price"})}),e.jsx(x,{type:"number",id:"retail_price",min:"0",defaultValue:s.retail_price,required:!0,onChange:a=>r("retail_price",a.target.value),color:l.retail_price&&"failure",helperText:l.retail_price})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(n,{htmlFor:"wholesale_price",value:"WholeSale Price"})}),e.jsx(x,{type:"number",id:"wholesale_price",min:"0",defaultValue:s.wholesale_price,required:!0,onChange:a=>r("wholesale_price",a.target.value),color:l.wholesale_price&&"failure",helperText:l.wholesale_price})]})]})}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(n,{htmlFor:"description",value:"Description"})}),e.jsx(D,{id:"description",required:!0,value:s.description,rows:2,onChange:a=>r("description",a.target.value),color:l.description&&"failure",helperText:l.description})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(d,{type:"button",color:"light",onClick:j,children:"Close"}),e.jsx(d,{type:"button",disabled:N,onClick:F,children:"Save"})]})]})]})]})})}export{J as default};

import{r,y as F,j as e,a as H}from"./app-WAcuAQYG.js";import{A as k}from"./AuthenticatedLayout-Lew2t8BI.js";import{A,B as N,d as R,a as t,L as n,T as i,S as T}from"./Toast-xa_T1Asx.js";import"./ApplicationLogo-UB9_MBiy.js";import"./index-izUsY6vX.js";function O({auth:f,flash:j,categories:y}){const C=["All","Daily","Monthly","Yearly","Custom"],[c,h]=r.useState(),[x,v]=r.useState(),[m,p]=r.useState(),[o,u]=r.useState(),[d,S]=r.useState(0),[g,b]=r.useState(!1);r.useEffect(()=>{h(new Date().toISOString().split("T")[0]),v(new Date().toISOString().split("T")[0]),p(new Date().getMonth()),u(new Date().getFullYear())},[]),r.useEffect(()=>{w()},[c,x,d,m,o]);const w=()=>{F.reload({data:{date:c,endDate:x,selectedReport:d,month:m,year:o},onStart:()=>{b(!0)},onProgress:s=>{console.log(s)},onFinish:()=>{b(!1)}})},D=()=>{if(d==1)return e.jsxs("div",{className:"mb-2 ",children:[e.jsx("div",{className:"block",children:e.jsx(n,{htmlFor:"date",value:"Date"})}),e.jsx(i,{id:"date",value:c,onChange:s=>{h(s.target.value)},type:"date"})]});if(d==2){const s=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs("div",{className:"block",children:[e.jsxs("div",{children:[e.jsx("div",{className:"block",children:e.jsx(n,{htmlFor:"month",value:"Month"})}),e.jsx(T,{id:"month",value:m,onChange:a=>{p(a.target.value)},type:"date",children:s.map((a,l)=>e.jsx("option",{value:l,children:a},l))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"block",children:e.jsx(n,{htmlFor:"year",value:"Year"})}),e.jsx(i,{id:"year",value:o,onChange:a=>{u(a.target.value)}})]})]})}if(d==3)return e.jsxs("div",{className:"mb-2 ",children:[e.jsx("div",{className:"block",children:e.jsx(n,{htmlFor:"year",value:"Year"})}),e.jsx(i,{id:"year",value:o,onChange:s=>{u(s.target.value)}})]});if(d==4)return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-2 ",children:[e.jsx("div",{className:"block",children:e.jsx(n,{htmlFor:"date",value:"Date"})}),e.jsx(i,{id:"date",value:c,onChange:s=>{h(s.target.value)},type:"date"})]}),e.jsxs("div",{className:"mb-2 ",children:[e.jsx("div",{className:"block",children:e.jsx(n,{htmlFor:"endDate",value:"End Date"})}),e.jsx(i,{id:"endDate",value:x,onChange:s=>{v(s.target.value)},type:"date"})]})]})};return e.jsxs(k,{user:f.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Products List"}),children:[e.jsx(H,{title:"Reports"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg h-[70vh] overflow-y-visible",children:e.jsxs("div",{className:"p-6 text-gray-900 md:w-auto w-screen",children:[j.message&&e.jsx(A,{color:"success",children:j.message}),e.jsxs("div",{className:"sticky top-0 z-10 border-b bg-white",children:[e.jsx("div",{className:"flex md:justify-end",children:e.jsx(N.Group,{children:C.map((s,a)=>e.jsx(N,{size:"sm",onClick:()=>{S(a)},color:d==a?"blue":"info",children:s},"H"+a))})}),D()]}),g&&e.jsx("div",{className:"flex justify-center",children:e.jsx(R,{className:"h-24 w-24"})}),!g&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2 overflow-auto",children:y.map(s=>e.jsxs("div",{className:"mb-5",children:[s.name,e.jsxs(t,{striped:!0,children:[e.jsxs(t.Head,{children:[e.jsx(t.HeadCell,{children:"Product"}),e.jsx(t.HeadCell,{children:"Received"}),e.jsx(t.HeadCell,{children:"Sold"}),e.jsx(t.HeadCell,{children:"Total Stock"})]}),e.jsx(t.Body,{children:s.products.map((a,l)=>e.jsxs(t.Row,{className:"text-xs",children:[e.jsx(t.Cell,{children:a.name}),e.jsx(t.Cell,{children:a.delivered_item}),e.jsx(t.Cell,{children:a.item_sold}),e.jsx(t.Cell,{children:a.remaining})]},"prod"+l))}),e.jsxs(t.Head,{children:[e.jsx(t.HeadCell,{children:"Total"}),e.jsx(t.HeadCell,{children:s.products.reduce((a,l)=>a+l.delivered_item,0)}),e.jsx(t.HeadCell,{children:s.products.reduce((a,l)=>a+l.item_sold,0)}),e.jsx(t.HeadCell,{children:s.products.reduce((a,l)=>a+l.remaining,0)})]})]})]},s.id))})})]})})})})]})}export{O as default};

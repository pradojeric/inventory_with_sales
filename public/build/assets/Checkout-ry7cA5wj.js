import{W as f,r as o,j as e}from"./app-LFVcxj7R.js";import{M as N}from"./Modal-wbw-UJO-.js";import y from"./OrderList-n69daNh4.js";import{L as t,T as l,S as C,B as x}from"./Toast-l3bA4Sul.js";import"./transition-nGBYlTIw.js";import"./Util-py14zHy8.js";import"./index-XUnKk2P5.js";function R({show:m,onClose:i=()=>{},orders:d,order_no:v,totalAmount:n,totalQuantity:j}){const{data:s,setData:c,post:_,processing:p,errors:r,reset:k,clearErrors:q}=f({order_no:v,customer_name:"",customer_address:"",payment_method:"",cash_received:"",sale_date:new Date().toISOString().split("T")[0],orders:[],change_amount:0,reference_no:""}),[g,u]=o.useState(0);o.useEffect(()=>{c("orders",d)},[d]),o.useEffect(()=>{u(-n)},[m]);const b=a=>{a.preventDefault(),_(route("sales.store"),{onSuccess:()=>[i()]})};return e.jsx(e.Fragment,{children:e.jsxs(N,{show:m,onClose:i,children:[e.jsx("div",{className:"w-screen"}),e.jsx("form",{children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h3",{className:"font-semibold uppercase tracking-tighter",children:"Checkout"}),e.jsx("hr",{}),e.jsxs("div",{className:"h-auto my-2 grid md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(y,{totalPrice:n,products:d,totalQuantity:j})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"order_no",value:"Order No"})}),e.jsx(l,{id:"order_no",value:s.order_no,disabled:!0,required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"sale_date",value:"Sale Date"})}),e.jsx(l,{type:"date",id:"sale_date",value:s.sale_date,onChange:a=>{c("sale_date",a.target.value)},color:r.sale_date&&"failure",helperText:r.sale_date,required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"customer_name",value:"Customer Name"})}),e.jsx(l,{id:"customer_name",required:!0,value:s.customer_name,name:"customer_name",autoComplete:"customer_name",onChange:a=>{c("customer_name",a.target.value)}})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"c_address",value:"Customer Address"})}),e.jsx(l,{id:"c_address",required:!0,value:s.customer_address,onChange:a=>{c("customer_address",a.target.value)}})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"payment_method",value:"Payment Mode"})}),e.jsxs(C,{id:"payment_method",required:!0,value:s.payment_method,onChange:a=>{c("payment_method",a.target.value)},color:r.payment_method&&"failure",helperText:r.payment_method,children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"gcash",children:"Gcash"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"account_receivable",children:"Account Receivable"})]})]}),(s.payment_method=="gcash"||s.payment_method=="cheque")&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"reference_no",value:"Reference No / Cheque No"})}),e.jsx(l,{id:"reference_no",required:!0,value:s.reference_no,onChange:a=>{c("reference_no",a.target.value)},color:r.reference_no&&"failure",helperText:r.reference_no})]}),s.payment_method=="account_receivable"&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"due_date",value:"Due Date"})}),e.jsx(l,{type:"date",id:"due_date",required:!0,value:s.due_date,onChange:a=>{c("due_date",a.target.value)},color:r.due_date&&"failure",helperText:r.due_date})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"cash_received",value:"Payment Received"})}),e.jsx(l,{id:"cash_received",type:"number",required:!0,min:0,value:s.cash_received,onChange:a=>{const h=a.target.value-n;c({...s,cash_received:a.target.value,change_amount:h}),u(h)},color:r.cash_received&&"failure",helperText:r.cash_received})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"cc",value:"Change"})}),e.jsx(l,{id:"cc",type:"number",required:!0,value:g,disabled:!0})]})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[e.jsx(x,{type:"button",color:"light",onClick:i,children:"Close"}),e.jsx(x,{onClick:b,disabled:d.length<1||p,children:"Save"})]})]})})]})})}export{R as default};

import{W as F,r as c,j as e}from"./app-YX2pnVqe.js";import T from"./AddCategory-iLxurEY-.js";import{M as P}from"./Modal-BWKKeNun.js";import{L as l,S as v,B as u,T as o,b as V}from"./Toast-xRRfD0nu.js";import{H as A}from"./index-Nb-1AsgF.js";import{B}from"./index-uq_HiwE2.js";import D from"./EditCategory-VSe9yRAD.js";import"./transition-2eVQxMA2.js";function G({categories:d,show:f=!1,onClose:x=()=>{}}){const{data:i,setData:t,post:g,processing:y,errors:a,reset:H,clearErrors:b}=F({name:"",category_id:"",description:"",variant_id:"",quantity:"",price:"",retail_price:"",wholesale_price:""}),[_,C]=c.useState(!1),[N,k]=c.useState(!1),[s,q]=c.useState(""),[w,h]=c.useState([]),p=()=>{C(r=>r=!r)},j=()=>{k(r=>r=!r)};c.useEffect(()=>{b()},[i]),c.useEffect(()=>{const r=d.find(n=>n.id==(s==null?void 0:s.id));r&&h(r.variants)},[d]);const S=r=>{r.preventDefault(),g(route("products.store"),{onSuccess:()=>[x()]})},E=r=>{t({...i,category_id:r,variant_id:""}),q(d.find(m=>m.id==r));const n=d.find(m=>m.id==r);h(n?n.variants:[])};return e.jsx(e.Fragment,{children:e.jsxs(P,{show:f,onClose:x,closeable:!1,children:[e.jsx(T,{show:_,onClose:p}),s&&e.jsx(D,{category:s,show:N,onClose:j}),e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 uppercase",children:"Products"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"category",value:"Category"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(v,{className:"w-full",id:"category",required:!0,value:i.category_id,onChange:r=>{E(r.target.value)},color:a.category_id&&"failure",children:[e.jsx("option",{value:"",children:"Select One"}),d.map(r=>e.jsx("option",{value:r.id,children:r.name},"cat"+r.id))]}),e.jsx(u,{type:"button",onClick:p,children:e.jsx(A,{})}),e.jsx(u,{disabled:!s,type:"button",color:"green",onClick:j,children:e.jsx(B,{})})]}),a.category_id&&e.jsx("p",{className:"mt-2 text-sm text-red-700",children:a.category_id})]}),e.jsx("div",{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{className:"block w-full",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"product",value:"Product"})}),e.jsx(o,{id:"product",value:i.name,className:"w-full",required:!0,onChange:r=>t("name",r.target.value),color:a.name&&"failure",helperText:a.name})]}),e.jsxs("div",{className:"shrink-0",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"variant_id",value:"Variant"})}),e.jsxs(v,{className:"w-full",id:"variant_id",required:!0,value:i.variant_id,onChange:r=>t("variant_id",r.target.value),color:a.category_id&&"failure",children:[e.jsx("option",{value:"",children:"N/A"}),w.map(r=>e.jsx("option",{value:r.id,children:r.name},"cat"+r.id))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"quantity",value:"Quantity"})}),e.jsx(o,{type:"number",id:"quantity",min:"0",defaultValue:i.quantity,required:!0,onChange:r=>t("quantity",r.target.value),color:a.quantity&&"failure",helperText:a.quantity})]})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"price",value:"Price"})}),e.jsx(o,{type:"number",id:"price",min:"0",defaultValue:i.price,required:!0,onChange:r=>t("price",r.target.value),color:a.price&&"failure",helperText:a.price})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"retail_price",value:"Retail Price"})}),e.jsx(o,{type:"number",id:"retail_price",min:"0",defaultValue:i.retail_price,required:!0,onChange:r=>t("retail_price",r.target.value),color:a.retail_price&&"failure",helperText:a.retail_price})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"wholesale_price",value:"WholeSale Price"})}),e.jsx(o,{type:"number",id:"wholesale_price",min:"0",defaultValue:i.wholesale_price,required:!0,onChange:r=>t("wholesale_price",r.target.value),color:a.wholesale_price&&"failure",helperText:a.wholesale_price})]})]})}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"description",value:"Description"})}),e.jsx(V,{id:"description",required:!0,value:i.description,rows:2,onChange:r=>t("description",r.target.value),color:a.description&&"failure",helperText:a.description})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(u,{type:"button",color:"light",onClick:x,children:"Close"}),e.jsx(u,{type:"button",disabled:y,onClick:S,children:"Save"})]})]})]})]})})}export{G as default};

import{W as T,r as p,j as e}from"./app-42ltUd7i.js";import{M as P}from"./Modal-DdNgA3zw.js";import{L as x,T as o,b as V,B as h}from"./Toast-XrROLtNV.js";import{a as w}from"./index-770LS76q.js";import"./transition-xdtGHmtU.js";function I({category:s=null,show:c=!1,onClose:m=()=>{}}){const{data:S,setData:a,post:f,processing:v,errors:r,reset:D,clearErrors:b}=T({name:s==null?void 0:s.name,description:s==null?void 0:s.description,variants:s==null?void 0:s.variants}),[u,j]=p.useState({name:""}),[l,d]=p.useState([]);p.useEffect(()=>{b()},[c]),p.useEffect(()=>{C()},[s]);const N=i=>{i.preventDefault(),f(route("categories.update",s==null?void 0:s.id),{onSuccess:()=>[m()]})},C=()=>{a({name:s==null?void 0:s.name,description:s==null?void 0:s.description,variants:s==null?void 0:s.variants}),d(s.variants)},k=i=>{i.name&&(d([...l,i]),a("variants",[...l,i]),j({name:""}))},E=i=>t=>{const n=[...l];n[i]={...n[i],name:t.target.value},d(n),a("variants",n)};return e.jsx(e.Fragment,{children:e.jsx(P,{show:c,onClose:m,closeable:!1,children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 uppercase",children:"Category"}),e.jsx("hr",{}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(x,{htmlFor:"name",value:"Category Name"})}),e.jsx(o,{id:"name",type:"text",defaultValue:s==null?void 0:s.name,required:!0,onChange:i=>a("name",i.target.value),color:r.name&&"failure",helperText:r.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(x,{htmlFor:"description",value:"Description"})}),e.jsx(V,{id:"description",required:!0,rows:2,defaultValue:s==null?void 0:s.description,onChange:i=>a("description",i.target.value),color:r.description&&"failure",helperText:r.description})]}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(x,{htmlFor:"properties",value:"Variants"})}),e.jsxs("div",{className:"flex space-x-2 mb-2",children:[e.jsx(o,{id:"properties",className:"w-full",placeholder:"Small/3mg/pcs",value:u.name,onChange:i=>j({name:i.target.value})}),e.jsx(h,{type:"button",disabled:!u.name,onClick:()=>k(u),children:"Add"})]}),l.map((i,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{className:"mr-4 text-red-700",onClick:()=>{const n=l.filter((q,F)=>F!=t);d(n),a("variants",n)},children:e.jsx(w,{className:"w-5 h-5"})}),e.jsx(o,{defaultValue:i.name,onChange:E(t)})]},"prop"+t))]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(h,{type:"button",color:"light",onClick:m,children:"Close"}),e.jsx(h,{type:"button",onClick:N,disabled:v,children:"Update"})]})]})]})})})}export{I as default};

import{W as f,r as n,j as e}from"./app-vmYIqMbQ.js";import{M as N}from"./Modal-u86PuMcf.js";import y from"./OrderList-gDp6Nfyz.js";import{L as t,T as c,S as C,B as x}from"./Toast-lSqrY-Ki.js";import"./transition-bLHC9y-q.js";import"./Util-py14zHy8.js";import"./index-HWNWORzS.js";function R({show:m,onClose:i=()=>{},orders:d,order_no:v,totalAmount:o,totalQuantity:j}){const{data:s,setData:l,post:_,processing:p,errors:r,reset:k,clearErrors:q}=f({order_no:v,customer_name:"",customer_address:"",payment_method:"",cash_received:"",sale_date:new Date().toISOString().split("T")[0],orders:[],change_amount:0,reference_no:""}),[g,u]=n.useState(0);n.useEffect(()=>{l("orders",d)},[d]),n.useEffect(()=>{u(-o)},[m]);const b=a=>{a.preventDefault(),_(route("sales.store"),{onSuccess:()=>[i()]})};return e.jsx(e.Fragment,{children:e.jsx(N,{show:m,onClose:i,maxWidth:"3xl",children:e.jsx("form",{children:e.jsxs("div",{className:"p-6 text-gray-900 h-full",children:[e.jsx("h3",{className:"font-semibold uppercase tracking-tighter",children:"Checkout"}),e.jsx("hr",{}),e.jsxs("div",{className:"h-auto my-2 grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(y,{totalPrice:o,products:d,totalQuantity:j})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"order_no",value:"Order No"})}),e.jsx(c,{id:"order_no",value:s.order_no,disabled:!0,required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"sale_date",value:"Sale Date"})}),e.jsx(c,{type:"date",id:"sale_date",value:s.sale_date,onChange:a=>{l("sale_date",a.target.value)},color:r.sale_date&&"failure",helperText:r.sale_date,required:!0})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"customer_name",value:"Customer Name"})}),e.jsx(c,{id:"customer_name",required:!0,value:s.customer_name,name:"customer_name",autoComplete:"customer_name",onChange:a=>{l("customer_name",a.target.value)}})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"c_address",value:"Customer Address"})}),e.jsx(c,{id:"c_address",required:!0,value:s.customer_address,onChange:a=>{l("customer_address",a.target.value)}})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"payment_method",value:"Payment Mode"})}),e.jsxs(C,{id:"payment_method",required:!0,value:s.payment_method,onChange:a=>{l("payment_method",a.target.value)},color:r.payment_method&&"failure",helperText:r.payment_method,children:[e.jsx("option",{value:"",children:"Select Payment Method"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"gcash",children:"Gcash"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"account_receivable",children:"Account Receivable"})]})]}),(s.payment_method=="gcash"||s.payment_method=="cheque")&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"reference_no",value:"Reference No / Cheque No"})}),e.jsx(c,{id:"reference_no",required:!0,value:s.reference_no,onChange:a=>{l("reference_no",a.target.value)},color:r.reference_no&&"failure",helperText:r.reference_no})]}),s.payment_method=="account_receivable"&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"due_date",value:"Due Date"})}),e.jsx(c,{type:"date",id:"due_date",required:!0,value:s.due_date,onChange:a=>{l("due_date",a.target.value)},color:r.due_date&&"failure",helperText:r.due_date})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"cash_received",value:"Payment Received"})}),e.jsx(c,{id:"cash_received",type:"number",required:!0,min:0,value:s.cash_received,onChange:a=>{const h=a.target.value-o;l({...s,cash_received:a.target.value,change_amount:h}),u(h)},color:r.cash_received&&"failure",helperText:r.cash_received})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"block",children:e.jsx(t,{htmlFor:"cc",value:"Change"})}),e.jsx(c,{id:"cc",type:"number",required:!0,value:g,disabled:!0})]})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-2",children:[e.jsx(x,{type:"button",color:"light",onClick:i,children:"Close"}),e.jsx(x,{onClick:b,disabled:d.length<1||p,children:"Save"})]})]})})})})}export{R as default};
